Trip Planner Walkthrough

I like including walkthrough's but not only because they are required but because they help me improve. I also think they're a great place to go back to once you've improved your skillset which includes blogging.

For the Rails Assessment project at Flatiron's Learn full stack web development program, I decided to build an application called "Trip Planner". This was one of the ideas I thought of while brainstorming as well as a bucket list. I've planned trips in the past and I'm actually in the process of planning one now. I figured why not create an application based on the functionality I think would be cool to have.

Once I had the idea down I found it somewhat tricky to figure out the proper associations. After writing a tasklist with models and controllers along with everything else that the app required, I had a better plan for taking down the deliverables. I also asked a learn expert to provide some suggestions and once we reviewed the associations I had in mind, I was ready to go.

I wrote down the requirements for the project such as the models and their attributes along with associations. I included the controllers I would probably use and their template views. I knew I wanted to include some form of authentication and thought of using devise because that'd be perfect and I wouldn't have to worry about handling sessions since devise does it for me. I even thought that maybe I could include omniauth for this project, but figured I could leave this feature for last. 

The first few tasks I took down were creating migrations, adding Devise, and models as well as associations. I generated the Rails environment for this application using the 'rails new' command. Once that was built out, I added some attributes to the migrations and tested out the associations. Afterwards I created a Welcome controller to start building out some actions and views. This lead me to add the bootstrap template, which was rather familiar to implement since I had already done this with my sinatra project.

I've realized that by starting out writing every step down and tackling them one by one that you I am able to code much more peacefully and quicker as opposed to just right out coding.

Moreover, after all that I decided to add the google maps feature that would map out all the objective's locations for a trip. This was pretty challenging and I'm glad the learn experts helped me figure it out. After reading through the google maps documentations for markers and how to include the map on your page I looked through several resources including forums to see what would be the best option for my app. I found some snippets online and started debugging what I found so that it fit my code. The challenging part was figuring out the right way to geocode the addresses based off the current attributes (city, state, and country). Luckily, I found a neat gem called 'geokit-rails' that contained modules for geocoding. 

One of the learn experts suggested adding latitude and longitude columns so that the map would load faster by storing the locations in the database as opposed to making an api call per location. This worked fabulously and definitely more efficient. I created two methods, one to concatenate the string for the location and another that would geocode as well as store that location in the database.
 
I'll admit, the map was a great learning experience. I was able to call ruby arrays and store them in javascript variables so that the map would render the information I wanted. Super cool!

Lastly, I noticed I was missing some validations and validation error messages as well as my Facebook authentication feature. So I added these last two tasks by including some validations in my models and then specifying validation errors in the form templates. Adding Facebook authentication required three gems 'omniauth', 'omniauth-facebook', and 'dotenv'. After adding the gems part of the configuration process required adding a couple things; a facebook api key and secret, a setter method for facebook authentication attributes, as well as a controller to handle the omniauth callbacks. For this, I added two columns to my users model as provider and uid so that omniauth can set them when a user decides to sign in using Facebook. I ran into some trouble trying to get an omniauth user to clear their session because after signing out, if anyone tried to log in using Facebook on the same computer they wouldn't get a Facebook login prompt because the other Facebook user's session was still active! The 'dotenv' gem was needed because Facebook did not like my env variables unless they were in cleartext which is not secure. With dotenv my env variables were handled and communicating the facebook_key and facebook_secret finally worked properly.

I loved this project and felt really happy with the end result. Now all I can think of is improving it with more features and maybe a better interactive UI.

* Updates *

After having other developers use my app, they gave me a ton of suggestions that I could implement. So I got to it. Some of these suggestions were things like nested forms and nested routes, along with links that would better the user experience. These things made my application much better. I also changed the functionality of some of my models so that a trip's objectives were strictly objectives and so that locations were well.. locations. This meant that I had to move my geocoding functionality over to the location model. Now anyone can create a location and anyone can also use that location for their trip's objective. Awesome, right?! I thought so too. I even added a neat function to show the city with the most booked trips to encourage users to go there ;-)

